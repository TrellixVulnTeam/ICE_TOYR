{"ast":null,"code":"import { takeLatest } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport express from 'express'; // const router = express();\n\nfunction* fetchCustomerSaga() {\n  yield axios({\n    method: 'GET',\n    url: '/api/customer'\n  }); // yield put({\n  //   type: \"SET_CUSTOMER\",\n  //   payload: response.data,\n  // });\n}\n\nfunction* addCustomerSaga(action) {\n  yield axios({\n    method: 'POST',\n    url: '/api/customer',\n    data: action.payload\n  });\n} // Leads to nelify function\n// function* addCustomerSaga(action) {\n//   console.log('adding a customer, with action.payload', action.payload);\n//   return fetch('/.netlify/functions/addCustomer', {\n//     body: JSON.stringify(action.payload),\n//     method: 'POST'\n//   }).then(response => {\n//     return response.json()\n//   }).catch((error) => {\n//     console.log('API error', error)\n//   })\n// }\n\n\nexpress.post('/api/customer', (req, res) => {\n  console.log('in my post with req.body', req.body);\n  axios({\n    method: 'POST',\n    url: \"https://staging.zuperpro.com/api/customers\",\n    headers: {\n      \"x-api-key\": process.env.ZUPERPRO\n    },\n    data: req.body\n  }).then(() => {\n    console.log('got a response from my POST', res);\n    res.sendStatus(201);\n  }).catch(error => {\n    console.log('error in POSTing', error);\n    res.sendStatus(500);\n  });\n}); // App Set //\n\nconst PORT = process.env.PORT || 5000;\n/** Listen * */\n\nrouter.listen(PORT, () => {\n  console.log(`Listening on port: ${PORT}`);\n});\n\nfunction* customerSaga() {\n  yield takeLatest('ADD_CUSTOMER', addCustomerSaga);\n  yield takeLatest('FETCH_CUSTOMER', fetchCustomerSaga);\n}\n\nexport default customerSaga;","map":{"version":3,"sources":["/Users/jman/Developer/ice/src/redux/sagas/customer.saga.js"],"names":["takeLatest","axios","express","fetchCustomerSaga","method","url","addCustomerSaga","action","data","payload","post","req","res","console","log","body","headers","process","env","ZUPERPRO","then","sendStatus","catch","error","PORT","router","listen","customerSaga"],"mappings":"AAAA,SAASA,UAAT,QAA2B,oBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,SAApB,C,CACA;;AAEA,UAAUC,iBAAV,GAA8B;AAE5B,QAAMF,KAAK,CAAC;AACVG,IAAAA,MAAM,EAAE,KADE;AAEVC,IAAAA,GAAG,EAAE;AAFK,GAAD,CAAX,CAF4B,CAM5B;AACA;AACA;AACA;AACD;;AAED,UAAUC,eAAV,CAA0BC,MAA1B,EAAkC;AAChC,QAAMN,KAAK,CAAC;AACVG,IAAAA,MAAM,EAAE,MADE;AAEVC,IAAAA,GAAG,EAAE,eAFK;AAGVG,IAAAA,IAAI,EAAED,MAAM,CAACE;AAHH,GAAD,CAAX;AAKD,C,CAED;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAP,OAAO,CAACQ,IAAR,CAAa,eAAb,EAA8B,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCH,GAAG,CAACI,IAA5C;AACAd,EAAAA,KAAK,CAAC;AACJG,IAAAA,MAAM,EAAE,MADJ;AAEJC,IAAAA,GAAG,EAAE,4CAFD;AAGJW,IAAAA,OAAO,EAAE;AAAE,mBAAaC,OAAO,CAACC,GAAR,CAAYC;AAA3B,KAHL;AAIJX,IAAAA,IAAI,EAAEG,GAAG,CAACI;AAJN,GAAD,CAAL,CAMGK,IANH,CAMQ,MAAM;AACVP,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,GAA3C;AACAA,IAAAA,GAAG,CAACS,UAAJ,CAAe,GAAf;AACD,GATH,EAUGC,KAVH,CAUSC,KAAK,IAAI;AACdV,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCS,KAAhC;AACAX,IAAAA,GAAG,CAACS,UAAJ,CAAe,GAAf;AACD,GAbH;AAcD,CAhBD,E,CAkBA;;AACA,MAAMG,IAAI,GAAGP,OAAO,CAACC,GAAR,CAAYM,IAAZ,IAAoB,IAAjC;AAEA;;AACAC,MAAM,CAACC,MAAP,CAAcF,IAAd,EAAoB,MAAM;AACxBX,EAAAA,OAAO,CAACC,GAAR,CAAa,sBAAqBU,IAAK,EAAvC;AACD,CAFD;;AAKA,UAAUG,YAAV,GAAyB;AACvB,QAAM3B,UAAU,CAAC,cAAD,EAAiBM,eAAjB,CAAhB;AACA,QAAMN,UAAU,CAAC,gBAAD,EAAmBG,iBAAnB,CAAhB;AACD;;AAED,eAAewB,YAAf","sourcesContent":["import { takeLatest } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport express from 'express';\n// const router = express();\n\nfunction* fetchCustomerSaga() {\n\n  yield axios({\n    method: 'GET',\n    url: '/api/customer',\n  });\n  // yield put({\n  //   type: \"SET_CUSTOMER\",\n  //   payload: response.data,\n  // });\n}\n\nfunction* addCustomerSaga(action) {\n  yield axios({\n    method: 'POST',\n    url: '/api/customer',\n    data: action.payload\n  });\n}\n\n// Leads to nelify function\n// function* addCustomerSaga(action) {\n//   console.log('adding a customer, with action.payload', action.payload);\n\n//   return fetch('/.netlify/functions/addCustomer', {\n//     body: JSON.stringify(action.payload),\n//     method: 'POST'\n//   }).then(response => {\n//     return response.json()\n//   }).catch((error) => {\n//     console.log('API error', error)\n//   })\n// }\n\n\nexpress.post('/api/customer', (req, res) => {\n  console.log('in my post with req.body', req.body);\n  axios({\n    method: 'POST',\n    url: \"https://staging.zuperpro.com/api/customers\",\n    headers: { \"x-api-key\": process.env.ZUPERPRO },\n    data: req.body\n  })\n    .then(() => {\n      console.log('got a response from my POST', res);\n      res.sendStatus(201);\n    })\n    .catch(error => {\n      console.log('error in POSTing', error);\n      res.sendStatus(500);\n    });\n});\n\n// App Set //\nconst PORT = process.env.PORT || 5000;\n\n/** Listen * */\nrouter.listen(PORT, () => {\n  console.log(`Listening on port: ${PORT}`);\n});\n\n\nfunction* customerSaga() {\n  yield takeLatest('ADD_CUSTOMER', addCustomerSaga);\n  yield takeLatest('FETCH_CUSTOMER', fetchCustomerSaga);\n}\n\nexport default customerSaga;\n"]},"metadata":{},"sourceType":"module"}